$(function(){function e(){$("#show_selection").hide(),$("#procedureInfo > tbody > tr").remove();var e=0;$("#doctor_form,#nurse_form").find("input:checkbox:checked").each(function(){var t=$(this).val(),o=$("#doctor_form,#nurse_form").find("#name"+t).html(),n=r(t);e+=parseInt(n),$("#procedureInfo > tbody").append("<tr><td>"+o+"</td><td>"+n+"</td></tr>")}),e&&$("#procedureInfo > tbody").append("<tr><td>Total</td><td><strong>"+e+"</strong></td></tr>"),$("#show_selection").show()}function r(e){var r=$("#cost"+e).val(),t=$("#discount"+e).val(),o=function(e,r,t){try{var o=e*r;return o-o*(t/100)}catch(r){return e}}(r,$("#quantity"+e).val(),t);return $("#amount"+e).val(o),o}$(".instructions").hide(),$("#doctor_form input,#doctor_form textarea,#nurse_form input,#nurse_form textarea").blur(function(){e()}),$("#in_procedures_table").dataTable({ajax:THE_PROCEDURE_URL,responsive:!0}),$("#doctor_form,#nurse_form").find("input:text").keyup(function(){e()}),$("input").on("ifChanged",function(){var r=$(this).parents("tr").find("input"),t=$(this).parents("tr").find("textarea");$(this).is(":checked")?(r.prop("disabled",!1),t.prop("disabled",!1),$(t).parent().show()):(r.prop("disabled",!0),t.prop("disabled",!0),$(t).parent().hide()),$(this).prop("disabled",!1),e()}),$("#nurse_form .check,#doctor_form .check").click(function(){var r=$(this).parent().parent().find("input"),t=$(this).parent().parent().find("textarea");$(this).is(":checked")?(r.prop("disabled",!1),t.prop("disabled",!1),$(t).parent().show()):(r.prop("disabled",!0),t.prop("disabled",!0),$(t).parent().hide()),$(this).prop("disabled",!1),e()}),$("#saveProcedure").click(function(e){e.preventDefault(),$.ajax({type:"POST",url:DIAGNOSIS_URL,data:$("#doctor_form, #nurse_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Patient procedure updated'),$("#procedureTab").find("input").iCheck("uncheck"),$("#in_procedures_table").dataTable().api().ajax.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Could not save procedure')}})}),$("#doctor_form,#nurse_form").find("input:radio, input:checkbox").prop("checked",!1),$("#show_selection").hide()});