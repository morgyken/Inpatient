$(function(){function r(){$("#show_selection").hide(),$("#procedureInfo > tbody > tr").remove();var r=0;$("#doctor_form,#nurse_form").find("input:checkbox:checked").each(function(){var t=$(this).val(),o=$("#doctor_form,#nurse_form").find("#name"+t).html(),n=e(t);r+=parseInt(n),$("#procedureInfo > tbody").append("<tr><td>"+o+"</td><td>"+n+"</td></tr>")}),r&&$("#procedureInfo > tbody").append("<tr><td>Total</td><td><strong>"+r+"</strong></td></tr>"),$("#show_selection").show()}function e(r){var e=$("#cost"+r).val(),t=$("#discount"+r).val(),o=function(r,e,t){try{var o=r*e;return o-o*(t/100)}catch(e){return r}}(e,$("#quantity"+r).val(),t);return $("#amount"+r).val(o),o}$(".instructions").hide(),$("#doctor_form input,#doctor_form textarea,#nurse_form input,#nurse_form textarea").blur(function(){r()}),$("#in_procedures_table").dataTable({ajax:THE_PROCEDURE_URL,responsive:!0}),$("#doctor_form,#nurse_form").find("input:text").keyup(function(){r()}),$("#doctor_form,#nurse_form").find("input").on("ifChanged",function(){var e=$(this).parents("tr").find("input"),t=$(this).parents("tr").find("textarea");$(this).is(":checked")?(e.prop("disabled",!1),t.prop("disabled",!1),$(t).parent().show()):(e.prop("disabled",!0),t.prop("disabled",!0),$(t).parent().hide()),$(this).prop("disabled",!1),r()}),$("#nurse_form .check,#doctor_form .check").click(function(){var e=$(this).parent().parent().find("input"),t=$(this).parent().parent().find("textarea");$(this).is(":checked")?(e.prop("disabled",!1),t.prop("disabled",!1),$(t).parent().show()):(e.prop("disabled",!0),t.prop("disabled",!0),$(t).parent().hide()),$(this).prop("disabled",!1),r()}),$("#saveProcedure").click(function(r){r.preventDefault(),$.ajax({type:"POST",url:DIAGNOSIS_URL,data:$("#doctor_form, #nurse_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Patient procedure updated'),$("#procedureTab").find("input").iCheck("uncheck"),$("#in_procedures_table").dataTable().api().ajax.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Could not save procedure')}})}),$("#doctor_form,#nurse_form").find("input:radio, input:checkbox").prop("checked",!1),$("#show_selection").hide()});