var MY_NICE_TABLE=null;$(function(){function t(){$("#show_selection").hide(),$("#diagnosisInfo > tbody > tr").remove();var t=0;$("#diagnosis_form input:checkbox:checked").each(function(){var o=$(this).val(),i=$("#name"+o).html(),r=a(o);t+=parseInt(r),$("#diagnosisInfo > tbody").append("<tr><td>"+i+"</td><td>"+r+"</td></tr>")}),$("#laboratory_form input:checkbox:checked").each(function(){var o=$(this).val(),i=$("#name"+o).html(),r=a(o);t+=parseInt(r),$("#diagnosisInfo > tbody").append("<tr><td>"+i+"</td><td>"+r+"</td></tr>")}),$("#radiology_form input:checkbox:checked").each(function(){var o=$(this).val(),i=$("#name"+o).html(),r=a(o);t+=parseInt(r),$("#diagnosisInfo > tbody").append("<tr><td>"+i+"</td><td>"+r+"</td></tr>")}),t&&$("#diagnosisInfo > tbody").append("<tr><td>Total</td><td><strong>"+t+"</strong></td></tr>"),$("#show_selection").show()}function o(t,o,a){try{var i=t*o;return i-i*(a/100)}catch(o){return t}}function a(t){var a=$("#cost"+t).val(),i=$("#discount"+t).val(),r=o(a,$("#quantity"+t).val(),i);return $("#amount"+t).val(r),r}$(".instructions").hide(),$("#radiology_form input,#radilogy_form textarea, #diagnosis_form input,#diagnosis_form textarea,#laboratory_form input,#laboratory_form textarea").blur(function(){t()}),MY_NICE_TABLE=$("#in_table").dataTable({ajax:THE_TABLE_URL}),$("#diagnosis_form input:text").keyup(function(){t()}),$("#laboratory_form input:text").keyup(function(){t()}),$("#radiology_form input:text").keyup(function(){t()}),$("input").on("ifChanged",function(o){var a=$(this).parents("tr").find("input"),i=$(this).parents("tr").find("textarea");$(this).is(":checked")?(a.prop("disabled",!1),i.prop("disabled",!1),$(i).parent().show()):(a.prop("disabled",!0),i.prop("disabled",!0),$(i).parent().hide()),$(this).prop("disabled",!1),t()}),$("#radiology_form .check,#laboratory_form .check,#diagnosis_form .check").click(function(){var o=$(this).parent().parent().find("input"),a=$(this).parent().parent().find("textarea");$(this).is(":checked")?(o.prop("disabled",!1),a.prop("disabled",!1),$(a).parent().show()):(o.prop("disabled",!0),a.prop("disabled",!0),$(a).parent().hide()),$(this).prop("disabled",!1),t()}),$("#saveDiagnosis").click(function(t){t.preventDefault(),$.ajax({type:"POST",url:DIAGNOSIS_URL,data:$("#radiology_form,#diagnosis_form, #laboratory_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Patient evaluation updated'),MY_NICE_TABLE.ajax.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Could not save evaluation')}})}),$("#laboratory_form").find("input:radio, input:checkbox").prop("checked",!1),$("#diagnosis_form").find("input:radio, input:checkbox").prop("checked",!1),$("#radiology_form").find("input:radio, input:checkbox").prop("checked",!1),$("#show_selection").hide()});