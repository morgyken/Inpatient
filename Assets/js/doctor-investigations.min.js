$(function(){function o(){$("#show_procedure_selection").hide(),$("#diagnosisInfo > tbody > tr").remove();var o=0;$("#diagnosis_form,#laboratory_form,#radiology_form").find("input:checkbox:checked").each(function(){var t=$(this).val(),a=$("#diagnosis_form,#laboratory_form,#radiology_form").find("#name"+t).html(),r=i(t);o+=parseInt(r),$("#diagnosisInfo > tbody").append("<tr><td>"+a+"</td><td>"+r+"</td></tr>")}),o&&$("#diagnosisInfo > tbody").append("<tr><td>Total</td><td><strong>"+o+"</strong></td></tr>"),$("#show_procedure_selection").show()}function i(o){var i=$("#diagnosis_form,#laboratory_form,#radiology_form"),t=i.find("#cost"+o).val(),a=i.find("#discount"+o).val(),r=function(o,i,t){try{var a=o*i;return a-a*(t/100)}catch(i){return o}}(t,i.find("#quantity"+o).val(),a);return i.find("#amount"+o).val(r),r}$(".instructions").hide(),$("#radiology_form input,#radilogy_form textarea, #diagnosis_form input,#diagnosis_form textarea,#laboratory_form input,#laboratory_form textarea").blur(function(){o()}),$("#in_table").dataTable({ajax:THE_TABLE_URL,responsive:!0}),$("#diagnosis_form input:text").keyup(function(){o()}),$("#laboratory_form input:text").keyup(function(){o()}),$("#radiology_form input:text").keyup(function(){o()}),$("input").on("ifChanged",function(i){var t=$(this).parents("tr").find("input"),a=$(this).parents("tr").find("textarea");$(this).is(":checked")?(t.prop("disabled",!1),a.prop("disabled",!1),$(a).parent().show()):(t.prop("disabled",!0),a.prop("disabled",!0),$(a).parent().hide()),$(this).prop("disabled",!1),o()}),$("#radiology_form .check,#laboratory_form .check,#diagnosis_form .check").click(function(){var i=$(this).parent().parent().find("input"),t=$(this).parent().parent().find("textarea");$(this).is(":checked")?(i.prop("disabled",!1),t.prop("disabled",!1),$(t).parent().show()):(i.prop("disabled",!0),t.prop("disabled",!0),$(t).parent().hide()),$(this).prop("disabled",!1),o()}),$("#saveInvestigations").click(function(){$.ajax({type:"POST",url:DIAGNOSIS_URL,data:$("#radiology_form,#diagnosis_form, #laboratory_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Patient investigation updated'),$("#investigationTab").find("input").iCheck("uncheck"),$("#in_table").dataTable().api().ajax.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Could not save investigation')}})}),$("#laboratory_form,#diagnosis_form,#radiology_form").find("input:radio, input:checkbox").prop("checked",!1),$("#show_procedure_selection").hide()});