$(function(){function t(){$("#show_selection").hide(),$("#diagnosisInfo > tbody > tr").remove();var t=0;$("#diagnosis_form input:checkbox:checked").each(function(){var o=$(this).val(),a=$("#name"+o).html(),n=i(o);t+=parseInt(n),$("#diagnosisInfo > tbody").append("<tr><td>"+a+"</td><td>"+n+"</td></tr>")}),$("#laboratory_form input:checkbox:checked").each(function(){var o=$(this).val(),a=$("#name"+o).html(),n=i(o);t+=parseInt(n),$("#diagnosisInfo > tbody").append("<tr><td>"+a+"</td><td>"+n+"</td></tr>")}),$("#radiology_form input:checkbox:checked").each(function(){var o=$(this).val(),a=$("#name"+o).html(),n=i(o);t+=parseInt(n),$("#diagnosisInfo > tbody").append("<tr><td>"+a+"</td><td>"+n+"</td></tr>")}),t&&$("#diagnosisInfo > tbody").append("<tr><td>Total</td><td><strong>"+t+"</strong></td></tr>"),$("#show_selection").show()}function o(t,o,i){try{var a=t*o;return a-a*(i/100)}catch(o){return t}}function i(t){var i=$("#cost"+t).val(),a=$("#discount"+t).val(),n=o(i,$("#quantity"+t).val(),a);return $("#amount"+t).val(n),n}$(".instructions").hide(),$("#radiology_form input,#radilogy_form textarea, #diagnosis_form input,#diagnosis_form textarea,#laboratory_form input,#laboratory_form textarea").blur(function(){t()}),$("#diagnosis_form input:text").keyup(function(){t()}),$("#laboratory_form input:text").keyup(function(){t()}),$("#radiology_form input:text").keyup(function(){t()}),$("input").on("ifChanged",function(t){var o=$(this).parent().parent().find("input"),i=$(this).parent().parent().find("textarea");console.log(o,i),$(this).is(":checked")?(o.prop("disabled",!1),i.prop("disabled",!1),$(i).parent().show()):(o.prop("disabled",!0),i.prop("disabled",!0),$(i).parent().hide()),$(this).prop("disabled",!1)}),$("#radiology_form .check,#laboratory_form .check,#diagnosis_form .check").click(function(){var o=$(this).parent().parent().find("input"),i=$(this).parent().parent().find("textarea");$(this).is(":checked")?(o.prop("disabled",!1),i.prop("disabled",!1),$(i).parent().show()):(o.prop("disabled",!0),i.prop("disabled",!0),$(i).parent().hide()),$(this).prop("disabled",!1),t()}),$("#saveDiagnosis").click(function(t){t.preventDefault(),$.ajax({type:"POST",url:DIAGNOSIS_URL,data:$("#radiology_form,#diagnosis_form, #laboratory_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Patient evaluation updated'),location.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Could not save evalaution')}})}),$("#laboratory_form").find("input:radio, input:checkbox").prop("checked",!1),$("#diagnosis_form").find("input:radio, input:checkbox").prop("checked",!1),$("#radiology_form").find("input:radio, input:checkbox").prop("checked",!1),$("#show_selection").hide()});