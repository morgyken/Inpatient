$(function(){function t(t){$("#selected_treatment").hide(),$("#treatment > tbody > tr").remove();$("#treatment_form input:checkbox:checked").each(function(){var e=$(this).val(),a=$("#name"+e).html();if(t.includes("amount")){var r=$("#cost"+e).val()*$("#quantity"+e).val(),i=100*(r-(c=$("#amount"+e).val()))/r;$("#discount"+e).val(i),r+=parseInt(c),$("#treatment > tbody").append("<tr><td>"+a+"</td><td>"+c+"</td></tr>")}else{var c=n(e);r+=parseInt(c),$("#treatment > tbody").append("<tr><td>"+a+"</td><td>"+c+"</td></tr>")}}),$("#selected_treatment").show()}function e(){$.ajax({type:"POST",url:DIAGNOSIS_URL,data:$("#treatment_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Selected treatment procedures saved'),location.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Something wrong happened, Retry')}})}function n(t){var e=$("#cost"+t).val(),n=$("#discount"+t).val(),r=a(e,$("#quantity"+t).val(),n);return $("#amount"+t).val(r),r}function a(t,e,n){try{var a=t*e;return a-a*(n/100)}catch(e){return t}}$("#treatment_form input:text").keyup(function(){t($(this).attr("id"))}),$("#treatment_form input").blur(function(){t($(this).attr("id"))}),$("#treatment_form .check").change(function(){var e=$(this).parent().parent().find("input");$(this).is(":checked")?e.prop("disabled",!1):e.prop("disabled",!0),$(this).prop("disabled",!1),t($(this).attr("id"))}),$("#saveTreatment").click(function(t){t.preventDefault(),e()}),$("#treatment_form").find("input:radio, input:checkbox").prop("checked",!1),$("#selected_treatment").hide()});