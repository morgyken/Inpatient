$(function(){function n(){$("#show_consumable_selection").hide(),$("#consumableInfo > tbody > tr").remove();var n=0;$("#consumable_form").find("input:checkbox:checked").each(function(){var a=$(this).val(),t=$("#consumable_form").find("#name"+a).html(),o=e(a);n+=parseInt(o),$("#consumableInfo > tbody").append("<tr><td>"+t+"</td><td>"+o+"</td></tr>")}),n&&$("#consumableInfo > tbody").append("<tr><td>Total</td><td><strong>"+n+"</strong></td></tr>"),$("#show_consumable_selection").show()}function e(n){var e=$("#consumable_form"),a=e.find("#cost"+n).val(),t=e.find("#discount"+n).val(),o=function(n,e,a){try{var t=n*e;return t-t*(a/100)}catch(e){return n}}(a,e.find("#quantity"+n).val(),t);return e.find("#amount"+n).val(o),o}$(".instructions").hide(),$("#consumable_forminput,#consumable_formtextarea,#nurse_form input,#nurse_form textarea").blur(function(){n()}),$("#in_consumables_table").dataTable({ajax:THE_CONSUMABLE_URL,responsive:!0}),$("#consumable_form").find("input:text").keyup(function(){n()}),$("#consumable_form").find("input").on("ifChanged",function(){var e=$(this).parents("tr").find("input"),a=$(this).parents("tr").find("textarea");$(this).is(":checked")?(e.prop("disabled",!1),a.prop("disabled",!1),$(a).parent().show()):(e.prop("disabled",!0),a.prop("disabled",!0),$(a).parent().hide()),$(this).prop("disabled",!1),n()}),$("#saveConsumable").click(function(n){n.preventDefault(),$.ajax({type:"POST",url:CONSUMABLE_URL,data:$("#doctor_form, #nurse_form").serialize(),success:function(){alertify.success('<i class="fa fa-check-circle"></i> Patient consumable updated'),$("#consumableTab").find("input").iCheck("uncheck"),$("#in_consumables_table").dataTable().api().ajax.reload()},error:function(){alertify.error('<i class="fa fa-check-warning"></i> Could not save consumable')}})}),$("#consumable_form").find("input:radio, input:checkbox").prop("checked",!1),$("#show_consumable_selection").hide()});